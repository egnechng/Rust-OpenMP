# Rust vs. OpenMP 
A project comparing Rust and OpenMP via various benchmarks for CSCI-GA 3033 (Multicore Processors & Architecture)

## Report PDF
File: Report - Parallel Benchmarking_A Performance Comparison of Rust Rayon and C,C++_OpenMP.pdf, also on [Github](https://github.com/egnechng/Rust-OpenMP/blob/main/Report%20-%20Parallel%20Benchmarking_A%20Performance%20Comparison%20of%20Rust%20Rayon%20and%20C%2CC%2B%2B_OpenMP.pdf).
## Running Benchmark Suite
The suite is run through a python script `results.py`.<br>
Doing this will run through all the compilation and the running of the programs across the different axis (threads/problem-sizes).<br>
It will then measure the relavant metrics and save them within the `saved_suite_history.json`.<br>
**Rerunning the test suite will just add more data points to be averaged out later**, it won't wipe out previous measurements. 

Run the script:
```bash
python3 results.py
```

# Creating Graphs
**All graphs generated by the below process are found in the `graphing/metric_figs/` directory.**<br>
Within the `/graphing` folder, there is bash script (use `chmod +x graphing_env.sh` to make it executable).<br>
Run this to create the `venv` that will allow you to use the graphing modules seaborn/matplotlib/etc.<br>
Then, after running the script you can run either (1) run `cd graphing`, `source bin/activate`, `juypter lab` or (recommended) in VSCode, **open the `graphing/results_graph.ipnyb` notebook** and make sure to use the `graphing` kernel.<br>
You can then feel free to run the cells to recreate/modify the graphs. As said above the data will be drawn from the file `saved_suite_history.json`.

## Compiling C/C++ Code (OpenMP)
Run these commands within the `benchmarks/<benchmark>/omp` folder.  
C:
``` bash
gcc -Wall -std=c99 -fopenmp -o <executable> <file_name>
```
C++:
``` bash
g++ -Wall -fopenmp -o <executable> <file_name>
```
Running individual program
```bash
./<executable> <number of threads t> <problem size N>
```

Example:

```bash
./histogram 4 10000000 #  t = 4 threads, N = 10M
```

## Compiling Rust code
Run these commands within the `benchmarks/<benchmark>/rust` folder.

```bash 
cargo build --release
```

Running src main.rs file
```bash
cargo run --release <number of threads t> <problem size N> 
```

Example (for `benchmarks/histogram/rust`):
```bash
cargo run --release 10000000 4  # t = 4 threads, N = 10M
```
